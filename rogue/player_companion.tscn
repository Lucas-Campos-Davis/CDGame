[gd_scene load_steps=44 format=3 uid="uid://b1ia5lvitx6pp"]

[ext_resource type="Texture2D" uid="uid://c41uyuyft00s8" path="res://Textures/Player/playerShadow1.png" id="1_ve2m8"]
[ext_resource type="Texture2D" uid="uid://b0e6aylgwvo8r" path="res://Textures/redesign/redesign_walking_animation1.png" id="2_qla6q"]
[ext_resource type="Texture2D" uid="uid://bwvbcojtx086u" path="res://Textures/redesign/redesign_walking_animation2.png" id="3_am0tm"]
[ext_resource type="Texture2D" uid="uid://btlxmnq1oime6" path="res://Textures/redesign/redesign_walking_animation3.png" id="4_74tr1"]
[ext_resource type="Texture2D" uid="uid://bcjoa0svfc6l3" path="res://Textures/redesign/redesign_walking_animation4.png" id="5_2l6g6"]
[ext_resource type="Texture2D" uid="uid://b17khm71ugbue" path="res://Textures/redesign/redesign_walking_animation5.png" id="6_5m0i3"]
[ext_resource type="Texture2D" uid="uid://6d4ng2y0bli0" path="res://Textures/redesign/redesign_walking_animation6.png" id="7_tlk41"]
[ext_resource type="Texture2D" uid="uid://bemoucxa6w6t2" path="res://Textures/redesign/redesign_walking_animation7.png" id="8_h4h5p"]
[ext_resource type="Texture2D" uid="uid://cciaojqywrp8a" path="res://Textures/redesign/redesign_walking_animation8.png" id="9_36eb4"]
[ext_resource type="Texture2D" uid="uid://b50xtqlru2ts1" path="res://Textures/redesign/redesign_walking_left1.png" id="10_dw82q"]
[ext_resource type="Texture2D" uid="uid://sieyk4vsrsce" path="res://Textures/redesign/redesign_walking_left2.png" id="11_rox1p"]
[ext_resource type="Texture2D" uid="uid://cwf24rghv40to" path="res://Textures/redesign/redesign_walking_left3.png" id="12_drwyt"]
[ext_resource type="Texture2D" uid="uid://cw1l28rta0q58" path="res://Textures/redesign/redesign_walking_left4.png" id="13_2u864"]
[ext_resource type="Texture2D" uid="uid://dhqnu37dpaqa0" path="res://Textures/redesign/redesign_walking_left5.png" id="14_2pjnf"]
[ext_resource type="Texture2D" uid="uid://01g8bmafkxc2" path="res://Textures/redesign/redesign_walking_left6.png" id="15_p6p0v"]
[ext_resource type="Texture2D" uid="uid://dt6xp2hmiorcs" path="res://Textures/redesign/redesign_walking_left7.png" id="16_mykk6"]
[ext_resource type="Texture2D" uid="uid://fl8g66bhaxlq" path="res://Textures/redesign/redesign_walking_left8.png" id="17_uiuml"]
[ext_resource type="Texture2D" uid="uid://l0ndsyqj8ht2" path="res://Textures/redesign/redesign_walking_right1.png" id="18_v8ldv"]
[ext_resource type="Texture2D" uid="uid://d14nixyb1pkr8" path="res://Textures/redesign/redesign_walking_right2.png" id="19_nqvlm"]
[ext_resource type="Texture2D" uid="uid://b27apng4lfda1" path="res://Textures/redesign/redesign_walking_right3.png" id="20_ec8os"]
[ext_resource type="Texture2D" uid="uid://dkio68iayjtda" path="res://Textures/redesign/redesign_walking_right4.png" id="21_nruc0"]
[ext_resource type="Texture2D" uid="uid://k7dwrjy0jvt8" path="res://Textures/redesign/redesign_walking_right5.png" id="22_uhp1b"]
[ext_resource type="Texture2D" uid="uid://dafpsswr58ast" path="res://Textures/redesign/redesign_walking_right6.png" id="23_ole6c"]
[ext_resource type="Texture2D" uid="uid://cpnotm71ignnv" path="res://Textures/redesign/redesign_walking_right7.png" id="24_ed8ly"]
[ext_resource type="Texture2D" uid="uid://gpt6e1g4m4h8" path="res://Textures/redesign/redesign_walking_right8.png" id="25_d4xvh"]
[ext_resource type="Texture2D" uid="uid://dwhqi6en3faay" path="res://Textures/redesign/redesign_walking_animation_up1.png" id="26_gxact"]
[ext_resource type="Texture2D" uid="uid://crub35brmdy1y" path="res://Textures/redesign/redesign_walking_animation_up2.png" id="27_j50je"]
[ext_resource type="Texture2D" uid="uid://dt5expu04ph7g" path="res://Textures/redesign/redesign_walking_animation_up3.png" id="28_rvvah"]
[ext_resource type="Texture2D" uid="uid://hbt4vsvxflhm" path="res://Textures/redesign/redesign_walking_animation_up4.png" id="29_mdlak"]
[ext_resource type="Texture2D" uid="uid://ch5x057xd2l76" path="res://Textures/redesign/redesign_walking_animation_up5.png" id="30_lm3fs"]
[ext_resource type="Texture2D" uid="uid://ddfipqjxp3xyt" path="res://Textures/redesign/redesign_walking_animation_up6.png" id="31_eag5a"]
[ext_resource type="Texture2D" uid="uid://ddffyctf5ckun" path="res://Textures/redesign/redesign_walking_animation_up7.png" id="32_8yhph"]
[ext_resource type="Texture2D" uid="uid://carr3dybeho4l" path="res://Textures/redesign/redesign_walking_animation_up8.png" id="33_y1v38"]
[ext_resource type="Script" path="res://companionFollow.gd" id="34_0kh7o"]
[ext_resource type="Texture2D" uid="uid://cyfhps3oxpgku" path="res://Textures/companion/body.png" id="35_gr6gp"]
[ext_resource type="Texture2D" uid="uid://du13c28pvvfmw" path="res://Textures/companion/body1.png" id="36_n46o1"]
[ext_resource type="Texture2D" uid="uid://curlvo27w7w3r" path="res://Textures/companion/body2.png" id="37_1eyjr"]
[ext_resource type="Texture2D" uid="uid://d0mhlxrxqiyek" path="res://Textures/companion/body3.png" id="38_x7n7g"]

[sub_resource type="GDScript" id="1"]
script/source = "extends CharacterBody2D

var speed = 50
var foliageTileMap;


func get_input():
	velocity = Vector2()
	
	if Input.is_action_pressed('right'):
		velocity.x += 1
		
	if Input.is_action_pressed('left'):
		velocity.x -= 1
		
	if Input.is_action_pressed('down'):
		velocity.y += 1
		
	if Input.is_action_pressed('up'):
		velocity.y -= 1
		
	velocity = velocity.normalized() * speed

func _unhandled_input(event):
	if event is InputEventKey:
		if event.pressed and event.keycode == KEY_E:
			foliageTileMap = get_parent().find_child(\"foliageTileMap\",true, false)
			foliageTileMap.set_cell(0, foliageTileMap.local_to_map(position), 0, Vector2i(2,1), 0);


func _physics_process(delta):
	get_input()
	set_velocity(velocity)
	move_and_slide()
	velocity = velocity
"

[sub_resource type="RectangleShape2D" id="2"]
size = Vector2(4.64023, 5.0552)

[sub_resource type="SpriteFrames" id="3"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_qla6q")
}, {
"duration": 1.0,
"texture": ExtResource("3_am0tm")
}, {
"duration": 1.0,
"texture": ExtResource("4_74tr1")
}, {
"duration": 1.0,
"texture": ExtResource("5_2l6g6")
}, {
"duration": 1.0,
"texture": ExtResource("6_5m0i3")
}, {
"duration": 1.0,
"texture": ExtResource("7_tlk41")
}, {
"duration": 1.0,
"texture": ExtResource("8_h4h5p")
}, {
"duration": 1.0,
"texture": ExtResource("9_36eb4")
}],
"loop": true,
"name": &"walk_down",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("10_dw82q")
}, {
"duration": 1.0,
"texture": ExtResource("11_rox1p")
}, {
"duration": 1.0,
"texture": ExtResource("12_drwyt")
}, {
"duration": 1.0,
"texture": ExtResource("13_2u864")
}, {
"duration": 1.0,
"texture": ExtResource("14_2pjnf")
}, {
"duration": 1.0,
"texture": ExtResource("15_p6p0v")
}, {
"duration": 1.0,
"texture": ExtResource("16_mykk6")
}, {
"duration": 1.0,
"texture": ExtResource("17_uiuml")
}],
"loop": true,
"name": &"walk_left",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("18_v8ldv")
}, {
"duration": 1.0,
"texture": ExtResource("19_nqvlm")
}, {
"duration": 1.0,
"texture": ExtResource("20_ec8os")
}, {
"duration": 1.0,
"texture": ExtResource("21_nruc0")
}, {
"duration": 1.0,
"texture": ExtResource("22_uhp1b")
}, {
"duration": 1.0,
"texture": ExtResource("23_ole6c")
}, {
"duration": 1.0,
"texture": ExtResource("24_ed8ly")
}, {
"duration": 1.0,
"texture": ExtResource("25_d4xvh")
}],
"loop": true,
"name": &"walk_right",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("26_gxact")
}, {
"duration": 1.0,
"texture": ExtResource("27_j50je")
}, {
"duration": 1.0,
"texture": ExtResource("28_rvvah")
}, {
"duration": 1.0,
"texture": ExtResource("29_mdlak")
}, {
"duration": 1.0,
"texture": ExtResource("30_lm3fs")
}, {
"duration": 1.0,
"texture": ExtResource("31_eag5a")
}, {
"duration": 1.0,
"texture": ExtResource("32_8yhph")
}, {
"duration": 1.0,
"texture": ExtResource("33_y1v38")
}],
"loop": true,
"name": &"walk_up",
"speed": 8.0
}]

[sub_resource type="GDScript" id="4"]
script/source = "extends AnimatedSprite2D


var front = load(\"res://rogue_front.png\");
var back = load(\"res://rogue_back.png\");
var left = load(\"res://rogue_left.png\");
var right = load(\"res://rogue_right.png\");

@export var companionDirection = \"LEFT\";

func get_input():
	if Input.is_action_pressed('up'):
		play(\"walk_up\")
		
	if Input.is_action_pressed('down'):
		play(\"walk_down\")
		
	if Input.is_action_pressed('right') && !Input.is_action_pressed('up') && !Input.is_action_pressed('down'):
		play(\"walk_right\")
		companionDirection = \"RIGHT\";
		
	if Input.is_action_pressed('left') && !Input.is_action_pressed('up') && !Input.is_action_pressed('down'):
		play(\"walk_left\")
		companionDirection = \"LEFT\";
		
	if !Input.is_action_pressed('right') && !Input.is_action_pressed('left') && !Input.is_action_pressed('down') && !Input.is_action_pressed('up'): 
		stop()
		frame = 0

func _physics_process(delta):
	get_input()
"

[sub_resource type="SpriteFrames" id="SpriteFrames_8sahu"]
animations = [{
"frames": [{
"duration": 7.0,
"texture": ExtResource("35_gr6gp")
}, {
"duration": 1.0,
"texture": ExtResource("36_n46o1")
}, {
"duration": 1.0,
"texture": ExtResource("37_1eyjr")
}, {
"duration": 1.0,
"texture": ExtResource("38_x7n7g")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[node name="Node2D" type="Node2D"]

[node name="player" type="CharacterBody2D" parent="."]
z_index = 2
y_sort_enabled = true
position = Vector2(16, -8)
script = SubResource("1")

[node name="hitBox" type="CollisionShape2D" parent="player"]
position = Vector2(-0.128502, 14.5218)
shape = SubResource("2")

[node name="gameCamera" type="Camera2D" parent="player"]
process_callback = 0
position_smoothing_enabled = true
position_smoothing_speed = 6.0

[node name="playerShadow" type="Sprite2D" parent="player"]
z_index = -1
position = Vector2(0, 14.4242)
texture = ExtResource("1_ve2m8")

[node name="player_animations" type="AnimatedSprite2D" parent="player"]
z_index = 1
y_sort_enabled = true
sprite_frames = SubResource("3")
animation = &"walk_right"
script = SubResource("4")

[node name="friend_spot_right" type="Node2D" parent="player"]
position = Vector2(14, -14)

[node name="friend_spot_left" type="Node2D" parent="player"]
position = Vector2(-16, -14)

[node name="companion" type="CharacterBody2D" parent="."]
z_index = 3
y_sort_enabled = true
position = Vector2(30, -22)
script = ExtResource("34_0kh7o")

[node name="companionSprite" type="AnimatedSprite2D" parent="companion"]
y_sort_enabled = true
sprite_frames = SubResource("SpriteFrames_8sahu")
autoplay = "default"
frame_progress = 0.739829
